(()=>{"use strict";var t={496:function(t,e,n){var o,r=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.AbortEvent=void 0;var i=n(974),c=n(44),s=function(t){function e(){var e=t.call(this)||this;return e.type=c.EventType.ABORT,e}return r(e,t),e.prototype.applyToController=function(t){return t.handleAbort(this)},e}(i.GameEvent);e.AbortEvent=s},885:function(t,e,n){var o,r=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.AimEvent=void 0;var i=n(974),c=n(44),s=n(135),u=n(912),a=function(t){function e(){var e=t.call(this)||this;return e.offset=new u.Vector3(0,0,0),e.angle=0,e.power=0,e.pos=new u.Vector3(0,0,0),e.i=0,e.type=c.EventType.AIM,e}return r(e,t),e.prototype.applyToController=function(t){return t.handleAim(this)},e.fromJson=function(t){var n=new e;return n.pos=(0,s.vec)(t.pos),n.angle=t.angle,n.offset=(0,s.vec)(t.offset),n.power=t.power,t.i&&(n.i=t.i),n},e.prototype.copy=function(){return e.fromJson(this)},e}(i.GameEvent);e.AimEvent=a},977:function(t,e,n){var o,r=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.BeginEvent=void 0;var i=n(974),c=n(44),s=function(t){function e(){var e=t.call(this)||this;return e.type=c.EventType.BEGIN,e}return r(e,t),e.prototype.applyToController=function(t){return t.handleBegin(this)},e}(i.GameEvent);e.BeginEvent=s},327:function(t,e,n){var o,r=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.BreakEvent=void 0;var i=n(974),c=n(44),s=function(t){function e(e,n){var o=t.call(this)||this;return o.init=e,o.shots=n,o.type=c.EventType.BREAK,o}return r(e,t),e.prototype.applyToController=function(t){return t.handleBreak(this)},e.fromJson=function(t){return new e(t.init,t.shots)},e}(i.GameEvent);e.BreakEvent=s},938:function(t,e,n){var o,r=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ChatEvent=void 0;var i=n(974),c=n(44),s=function(t){function e(e,n){var o=t.call(this)||this;return o.sender=e,o.message=n,o.type=c.EventType.CHAT,o}return r(e,t),e.prototype.applyToController=function(t){return t.handleChat(this)},e.fromJson=function(t){return new e(t.sender,t.message)},e}(i.GameEvent);e.ChatEvent=s},894:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EventHistory=void 0;var n=function(){function t(){this.sent=[]}return t.prototype.last=function(t){return t[t.length-1]},t.prototype.lastSent=function(){return this.last(this.sent)},t.prototype.lastRecv=function(){return this.recv},t.prototype.from=function(t,e){var n=t.findIndex((function(t){return t.sequence===e}));return t.slice(n)},t.prototype.nextId=function(t,e){var n=t.findIndex((function(t){return t.sequence===e}));return n<t.length-1?t[n+1].sequence:""},t.after=function(t,e){var n=t.findIndex((function(t){return t.sequence===e}));return t.slice(n+1)},t}();e.EventHistory=n},44:(t,e)=>{var n;Object.defineProperty(e,"__esModule",{value:!0}),e.EventType=void 0,function(t){t.BEGIN="BEGIN",t.BREAK="BREAK",t.WATCHAIM="WATCHAIM",t.AIM="AIM",t.HIT="HIT",t.STATIONARY="STATIONARY",t.CHAT="CHAT",t.ABORT="ABORT",t.PLACEBALL="PLACEBALL",t.REJOIN="REJOIN",t.RERACK="RERACK",t.STARTAIM="STARTAIM"}(n||(e.EventType=n={}))},664:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EventUtil=void 0;var o=n(44),r=n(885),i=n(971),c=n(25),s=n(496),u=n(327),a=n(977),l=n(938),p=n(671),f=n(900),v=n(78),y=n(339),h=function(){function t(){}return t.serialise=function(t){return JSON.stringify(t)},t.fromJson=function(t){switch(t.type){case o.EventType.BEGIN:return new a.BeginEvent;case o.EventType.AIM:return r.AimEvent.fromJson(t);case o.EventType.BREAK:return u.BreakEvent.fromJson(t);case o.EventType.WATCHAIM:return i.WatchEvent.fromJson(t.json);case o.EventType.HIT:return c.HitEvent.fromJson(t);case o.EventType.CHAT:return l.ChatEvent.fromJson(t);case o.EventType.REJOIN:return p.RejoinEvent.fromJson(t);case o.EventType.ABORT:return new s.AbortEvent;case o.EventType.PLACEBALL:return f.PlaceBallEvent.fromJson(t);case o.EventType.RERACK:return v.RerackEvent.fromJson(t);case o.EventType.STARTAIM:return y.StartAimEvent.fromJson(t);default:throw Error("Unknown GameEvent :"+t)}},t.fromSerialised=function(e){var n=JSON.parse(e),o=t.fromJson(n);return"sequence"in n&&(o.sequence=n.sequence),o},t}();e.EventUtil=h},974:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GameEvent=void 0;e.GameEvent=function(){}},25:function(t,e,n){var o,r=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.HitEvent=void 0;var i=n(974),c=n(44),s=function(t){function e(e){var n=t.call(this)||this;return n.type=c.EventType.HIT,n.tablejson=e,n}return r(e,t),e.prototype.applyToController=function(t){return t.handleHit(this)},e.fromJson=function(t){return new e(t.tablejson)},e}(i.GameEvent);e.HitEvent=s},900:function(t,e,n){var o,r=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.PlaceBallEvent=void 0;var i=n(974),c=n(44),s=n(135),u=function(t){function e(e,n){var o=t.call(this)||this;return o.pos=e,o.allTable=n,o.type=c.EventType.PLACEBALL,o}return r(e,t),e.fromJson=function(t){return new e((0,s.vec)(t.pos),t.allTable)},e.prototype.applyToController=function(t){return t.handlePlaceBall(this)},e}(i.GameEvent);e.PlaceBallEvent=u},671:function(t,e,n){var o,r=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.RejoinEvent=void 0;var i=n(974),c=n(44),s=function(t){function e(e,n){void 0===e&&(e=""),void 0===n&&(n="");var o=t.call(this)||this;return o.type=c.EventType.REJOIN,o.clientResendFrom=e,o.serverResendFrom=n,o}return r(e,t),e.prototype.applyToController=function(t){return t.handleRejoin(this)},e.fromJson=function(t){return new e(t.clientResendFrom,t.serverResendFrom)},e}(i.GameEvent);e.RejoinEvent=s},78:function(t,e,n){var o,r=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.RerackEvent=void 0;var i=n(974),c=n(44),s=function(t){function e(){var e=t.call(this)||this;return e.type=c.EventType.RERACK,e}return r(e,t),e.prototype.applyToController=function(t){return t.container.table.updateFromSerialised(this.ballinfo),t},e.fromJson=function(t){var n=new e;return n.ballinfo=t,n},e}(i.GameEvent);e.RerackEvent=s},339:function(t,e,n){var o,r=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.StartAimEvent=void 0;var i=n(974),c=n(44),s=function(t){function e(e){void 0===e&&(e=0);var n=t.call(this)||this;return n.foul=0,n.type=c.EventType.STARTAIM,n.foul=e,n}return r(e,t),e.prototype.applyToController=function(t){return t.handleStartAim(this)},e.fromJson=function(t){return new e(t.foul)},e}(i.GameEvent);e.StartAimEvent=s},971:function(t,e,n){var o,r=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.WatchEvent=void 0;var i=n(974),c=n(44),s=function(t){function e(e){var n=t.call(this)||this;return n.type=c.EventType.WATCHAIM,n.json=e,n}return r(e,t),e.prototype.applyToController=function(t){return t.handleWatch(this)},e.fromJson=function(t){return new e(t)},e}(i.GameEvent);e.WatchEvent=s},53:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Lobby=void 0;var o=n(977),r=n(938),i=n(664),c=n(160),s=n(270),u=n(920),a=function(){function t(){this.tables=new c.Tables,this.seq=1e3}return t.prototype.createClient=function(t,e,n,o){if(!e||!n){var r="Invalid: Connection request must contain tableId and clientId";return s.ServerLog.log(r),void t.send(r)}return{ws:t,name:o,clientId:n}},t.prototype.joinTable=function(t,e,n,r){void 0===n&&(n=""),void 0===r&&(r="");var i=this.tables.getTable(e);return i.isActive(t)&&""===n&&""===r?(this.sendInfo(t,e,"Already joined in another window"),!1):i.isRejoin(t)?this.rejoin(t,i,n,r):i.isFull()?(this.sendInfo(t,e,"Table already full"),!1):i.hasNoHistory(t)&&r?(this.sendInfo(t,e,"Cannot rejoin empty table"),!1):(i.join(t),1==i.clients.length?(this.sendInfo(t,e,"Waiting for opponent..."),!0):(this.notifyJoined(i),this.send(t,e,new o.BeginEvent),!0))},t.prototype.rejoin=function(t,e,n,o){var r=this,i=new u.Rejoin(t,e,n,o),c=i.delta();e.leave(t),e.rejoin(t),this.notifyOthers(t,e,"".concat(t.name," rejoined"));var a=i.replayEvents(c);return this.send(t,e.tableId,c),a.forEach((function(n){s.ServerLog.log("replay ".concat(n.sequence," ").concat(n.type)),r.send(t,e.tableId,n)})),!0},t.prototype.notifyOthers=function(t,e,n){var o=this;e.otherClients(t).forEach((function(t){o.sendInfo(t,e.tableId,n)}))},t.prototype.notifyJoined=function(t){var e=this,n="".concat(t.clients.map((function(t){return t.name})).join()," have joined ").concat(t.tableId);t.clients.forEach((function(o){e.sendInfo(o,t.tableId,n)}))},t.prototype.handleTableMessage=function(t,e,n){var o=this,r=this.tables.getTable(e),c=n.toString(),s=i.EventUtil.fromSerialised(c);r.recordRecvEvent(t,s),r.otherClients(t).forEach((function(t){o.send(t,e,s)}))},t.prototype.handleLeaveTable=function(t,e){s.ServerLog.log("".concat(t.name,":").concat(t.clientId," closed connection"));var n=this.tables.getTable(e);s.ServerLog.log("current clients: ".concat(n.clients.map((function(t){return t.clientId}))))},t.prototype.message=function(t,e){var n=new r.ChatEvent(t,e);return n.sequence="server-".concat(this.seq++),n},t.prototype.sendInfo=function(t,e,n){this.send(t,e,this.message("info",n))},t.prototype.send=function(t,e,n){var o,r;(null===(o=t.ws)||void 0===o?void 0:o.readyState)>=2?s.ServerLog.log("not sending to ".concat(t.name,":").concat(t.clientId)):(this.tables.getTable(e).recordSentEvent(t,n),null===(r=t.ws)||void 0===r||r.send(i.EventUtil.serialise(n)),s.ServerLog.logEvent("sending to ".concat(t.name,":").concat(t.clientId),n))},t}();e.Lobby=a},920:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Rejoin=void 0;var o=n(671),r=n(270),i=function(){function t(t,e,n,o){this.client=t,this.tableInfo=e,this.clientLastSent=n,this.clientLastRecv=o,this.history=this.tableInfo.history(this.client)}return t.prototype.delta=function(){var t=new o.RejoinEvent,e=this.history.lastSent(),n=this.history.lastRecv();return r.ServerLog.log("Calculate rejoin actions for ".concat(this.client.name," \n      with clientLastSent=").concat(this.clientLastSent,"\n       lastRecvFromClient=").concat(null==n?void 0:n.sequence,"\n           clientLastRecv=").concat(this.clientLastRecv,"\n         lastSentToClient=").concat(null==e?void 0:e.sequence)),e&&(this.clientLastRecv?e.sequence!==this.clientLastRecv&&(t.serverResendFrom=this.history.nextId(this.history.sent,this.clientLastRecv)):t.serverResendFrom=this.history.sent[0].sequence),""!==this.clientLastSent&&(n?n.sequence!==this.clientLastSent&&(t.clientResendFrom=n.sequence):t.clientResendFrom="*"),t},t.prototype.replayEvents=function(t){return t.serverResendFrom?this.history.from(this.history.sent,t.serverResendFrom):[]},t}();e.Rejoin=i},270:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ServerLog=void 0;var o=n(44),r=function(){function t(){}return t.log=function(e){t.enable&&console.log(e);var n="".concat((new Date).toISOString()," ").concat(e);t.record+="".concat(n,"\n")},t.logEvent=function(e,n){n.type!==o.EventType.AIM&&(n.type!==o.EventType.CHAT&&n.type!==o.EventType.REJOIN?t.log("".concat(e," ").concat(n.type)):t.log("".concat(e," ").concat(JSON.stringify(n))))},t.record="",t.enable=!1,t}();e.ServerLog=r},939:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SocketServer=void 0;var o=n(86),r=n(53),i=n(270),c=function(){function t(t){var e=this;this.wss=new o.WebSocketServer({noServer:!0}),this.lobby=new r.Lobby,this.port=t,i.ServerLog.log("WebSocketServer running on port ".concat(t)),this.wss.on("connection",(function(t,n){e.connection(t,n)}))}return t.prototype.parse=function(t){var e=t.split("?").pop();return new URLSearchParams(e)},t.prototype.connection=function(t,e){var n,o,r,c=this,s=this.parse(e.url),u=s.get("clientId"),a=s.get("tableId"),l=null!==(n=s.get("sent"))&&void 0!==n?n:"",p=null!==(o=s.get("recv"))&&void 0!==o?o:"",f=null!==(r=s.get("name"))&&void 0!==r?r:"anonymous";i.ServerLog.log("".concat(f,":").concat(u," requesting to join ").concat(a));var v=this.lobby.createClient(t,a,u,f);v&&this.lobby.joinTable(v,a,l,p)&&(t.on("message",(function(t){c.lobby.handleTableMessage(v,a,t)})),t.on("close",(function(t){c.lobby.handleLeaveTable(v,a)})))},t}();e.SocketServer=c},325:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TableInfo=void 0;var o=n(894),r=function(){function t(t){this.owningClientIds=[],this.clients=[],this.eventHistory=new Map,this.tableId=t}return t.prototype.history=function(t){return this.eventHistory.has(t.clientId)||this.eventHistory.set(t.clientId,new o.EventHistory),this.eventHistory.get(t.clientId)},t.prototype.hasNoHistory=function(t){return 0==this.history(t).sent.length&&!this.history(t).recv},t.prototype.recordSentEvent=function(t,e){this.history(t).sent.push(e)},t.prototype.recordRecvEvent=function(t,e){this.history(t).recv=e},t.prototype.join=function(t){this.owningClientIds.push(t.clientId),this.clients.push(t)},t.prototype.rejoin=function(t){this.clients.push(t)},t.prototype.leave=function(t){this.clients=this.otherClients(t)},t.prototype.otherClients=function(t){return this.clients.filter((function(e){return e.clientId!==t.clientId}))},t.prototype.isRejoin=function(t){return this.owningClientIds.includes(t.clientId)},t.prototype.isActive=function(t){return this.clients.some((function(e){return e.clientId===t.clientId}))},t.prototype.isFull=function(){return 2==this.clients.length},t}();e.TableInfo=r},160:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Tables=void 0;var o=n(325),r=function(){function t(){this.tables=new Map}return t.prototype.getTable=function(t){return this.tables.has(t)||this.tables.set(t,new o.TableInfo(t)),this.tables.get(t)},t}();e.Tables=r},135:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.up=e.zero=void 0,e.vec=function(t){return new o.Vector3(t.x,t.y,t.z)},e.upCross=function(t){return r.copy(e.up).cross(t)},e.norm=function(t){return i.copy(t).normalize()},e.passesThroughZero=function(t,e){return c.copy(t).add(e).dot(t)<=0},e.unitAtAngle=function(t){return new o.Vector3(1,0,0).applyAxisAngle(e.up,t)},e.round=s,e.round2=u,e.roundVec=function(t){return t.x=s(t.x),t.y=s(t.y),t.z=s(t.z),t},e.roundVec2=function(t){return t.x=u(t.x),t.y=u(t.y),t.z=u(t.z),t};var o=n(912);e.zero=new o.Vector3(0,0,0),e.up=new o.Vector3(0,0,1);var r=new o.Vector3,i=new o.Vector3,c=new o.Vector3;function s(t){return Math.sign(t)*Math.floor(1e4*(Math.abs(t)+Number.EPSILON))/1e4}function u(t){return Math.round(100*(t+Number.EPSILON))/100}},252:t=>{t.exports=require("express")},912:t=>{t.exports=require("three")},86:t=>{t.exports=require("ws")}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,n),i.exports}(()=>{var t=n(252),e=n(939),o=n(270);o.ServerLog.enable=!0,o.ServerLog.log("Started execution");var r=Number(process.env.PORT||8888),i=new e.SocketServer(r),c=t();c.use((function(t,e,n){e.header("Access-Control-Allow-Origin","*"),e.header("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),e.header("Access-Control-Allow-Headers","Content-Type, Authorization"),"OPTIONS"===t.method?e.sendStatus(200):n()})),c.use("/dist",t.static("dist")),c.get("/logs",(function(t,e){e.send('<pre style="font-size: smaller;">'.concat(o.ServerLog.record,"</pre>"))})),c.get("/",(function(t,e){e.redirect("/dist/multi.html")})),o.ServerLog.log("Starting server");var s=c.listen(r,(function(){return o.ServerLog.log("Webserver running on http://localhost:".concat(r,"/dist/multi.html"))}));s.keepAliveTimeout=6e4,s.headersTimeout=6e4,s.on("upgrade",(function(t,e,n){o.ServerLog.log("upgrade request for websocket ".concat(t.url)),i.wss.handleUpgrade(t,e,n,(function(e){i.wss.emit("connection",e,t)}))}))})()})();